<?xml version="1.0" encoding="UTF-8" ?>  
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >  
<mapper namespace="com.cn.user.dao.UserDao">  
    <resultMap id="BaseResultMap" type="com.cn.entity.User"> 
         <result property="id" column="id"/>  
        <result column="userName" property="userName" />  
        <result column="password" property="password" />  
    </resultMap> 
    <resultMap id="UserResultMap"  type="com.cn.entity.User">
     <result property="id" column="id"/> 
    <result column="userName" property="userName"/>
    <result column="password" property="password"/>
    <result column="roleId" property="roleId"/>
    </resultMap> 
  <sql id="Base_Column_List" >  
    userName, password  
  </sql>
  <sql id="Base_Column_User" >  
    id,userName,password,roleId   
  </sql>    
  <select id="selectId" resultMap="BaseResultMap" parameterType="java.lang.String" >  
    select   
    <include refid="Base_Column_List" />  
    from users  
    where userName = #{username,jdbcType=VARCHAR}  
  </select> 
  <select id="getByUserName" parameterType="java.lang.String" resultMap="UserResultMap">
  select
 <!--  自定义sql -->
  <include refid="Base_Column_User"/>
  from t_user 
  where userName=#{userName,jdbcType=VARCHAR}
  </select> 
  <select id="getRoles" parameterType="java.lang.String" resultType="java.lang.String">
   select r.roleName from t_user u,t_role r where u.roleId=r.id and u.userName=#{userName} 
  </select>
  <select id="getPermissions" parameterType="java.lang.String" resultType="java.lang.String">
  select p.permissionName from t_user u,t_role r,t_permission p where u.roleId=r.id and p.roleId=r.id and u.userName=#{userName}
   </select>
</mapper>  